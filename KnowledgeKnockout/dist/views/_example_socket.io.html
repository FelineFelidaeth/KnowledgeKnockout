<!DOCTYPE html>
<html>
<include _example_head />

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <div id="container-chat"></div>
    <input type="text" id="message" />
    <input type="button" id="send" value="send" />
    <script>

        const socket = io('http://localhost/');

        const container = document.getElementById('container-chat');
        const messageTextInput = document.getElementById('message');
        const sendButton = document.getElementById('send');

        socket.on('chat', msg => {
            msg = JSON.parse(msg);
            const paragraph = document.createElement('p');
            paragraph.textContent = `${msg.username}: ${msg.msg}`;
            container.appendChild(paragraph);
        });

        sendButton.addEventListener('click', () => {
            socket.emit('chat', messageTextInput.value);
            messageTextInput.value = '';
        });


    </script>
</body>

</html>